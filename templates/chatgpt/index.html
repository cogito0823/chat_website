<!DOCTYPE html>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Navbar</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
            aria-controls="navbarText" aria-expanded="False" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarText">
        <ul class="navbar-nav mr-auto">
            {% if user.is_authenticated %}

                <li class="nav-item">
                    <a class="nav-link" href="logout">Logout</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Welcome, {{ user.username }}</a>
                </li>

            {% else %}

                <li class="nav-item">
                    <a class="nav-link" href="accounts/login">Login</a>
                </li>

            {% endif %}
        </ul>
    </div>
</nav>

<head>
    <title>Chat</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
.container {
  margin: 50px auto;
  width: 80%;
  max-width: 800px;
  border: 1px solid #ccc;
  border-radius: 5px;
  background-color: #f6f6f6;
}

.chat-window {
  height: 400px;
  overflow-y: scroll;
  padding: 10px;
}

.chat-form {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 10px;
}

#chat-input {
  flex: 1;
  padding: 10px;
  margin-right: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
}

.chat-message {
  padding: 5px 10px;
  margin: 5px;
  border-radius: 5px;
}

.sent {
  background-color: #d5e7fc;
}

.received {
  background-color: #fff;
}

.btn {
  padding: 10px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
  font-weight: bold;
  text-transform: uppercase;
  color: #fff;
}

.btn-danger {
  background-color: #dc3545;
}

.btn-danger:hover {
  background-color: #c82333;
}
</style>
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
  <div class="container">
    <div class="chat-window">
      <div id="message-container"></div>
    </div>
    <div class="chat-form-container">
      <form id="chat-form" class="chat-form">
        <label for="chat-input"></label><input type="text" id="chat-input" placeholder="Type a message...">
        <input type="submit" value="Send">
      </form>
    </div><div class="text-center">
  <button id="clear-chat-btn" class="btn btn-danger" style="min-width: 400px; line-height: 1.5">Clear chat</button>
</div></div>
  <script>
    $(document).ready(function () {
      $('#clear-chat-btn').click(function (event) {
        event.preventDefault();
        $.ajax({
          url: '',
          method: 'DELETE',
          success: function (response) {
            window.location.reload();
          }
        });
      });
    });

    $(document).ready(function () {
      $('#chat-form').submit(function (event) {
        event.preventDefault();
        let prompt = $('#chat-input').val();
        prompt = prompt.replace(/\n/g, '<br>');
        $.ajax({
          url: '',
          method: 'POST',
          data: {'prompt': prompt},
          success: function (response) {
            var content = response.content;
            $('#message-container').append('<div class="chat-message sent"><p>' + prompt + '</p></div>');
            $('#message-container').append('<div class="chat-message received"><p>' + content + '</p></div>');
            $('#chat-input').val('');
          }
        });
      });
    });
  </script>
</body>



<!-- Example-->

<!-- Form Module-->
